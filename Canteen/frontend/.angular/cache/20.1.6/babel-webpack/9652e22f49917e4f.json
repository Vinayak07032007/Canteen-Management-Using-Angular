{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, computed, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet DashboardComponent = class DashboardComponent {\n  http;\n  constructor(http) {\n    this.http = http;\n    this.loadMenu();\n    this.loadOrders();\n  }\n  tables = [1, 2, 3, 4, 5];\n  menu = signal([], ...(ngDevMode ? [{\n    debugName: \"menu\"\n  }] : []));\n  orders = signal([], ...(ngDevMode ? [{\n    debugName: \"orders\"\n  }] : []));\n  currentOrder = signal([], ...(ngDevMode ? [{\n    debugName: \"currentOrder\"\n  }] : []));\n  newItem = {\n    name: '',\n    price: null\n  };\n  customerName = '';\n  tableNumber = null;\n  total = computed(() => this.currentOrder().reduce((s, i) => s + i.total, 0), ...(ngDevMode ? [{\n    debugName: \"total\"\n  }] : []));\n  loadMenu() {\n    this.http.get('/api/canteen/menu').subscribe(items => this.menu.set(items));\n  }\n  loadOrders() {\n    this.http.get('/api/canteen/orders').subscribe(items => this.orders.set(items));\n  }\n  addMenu() {\n    const name = this.newItem.name?.trim();\n    const price = Number(this.newItem.price);\n    if (!name || !price || price <= 0) return;\n    this.http.post('/api/canteen/menu', {\n      name,\n      price\n    }).subscribe(() => {\n      this.newItem = {\n        name: '',\n        price: null\n      };\n      this.loadMenu();\n    });\n  }\n  addToOrder(item) {\n    const exists = this.currentOrder().find(i => i.itemName === item.name);\n    if (exists) {\n      exists.quantity += 1;\n      exists.total = exists.quantity * item.price;\n      this.currentOrder.set([...this.currentOrder()]);\n    } else {\n      this.currentOrder.set([...this.currentOrder(), {\n        itemName: item.name,\n        quantity: 1,\n        total: item.price\n      }]);\n    }\n  }\n  placeOrder() {\n    if (!this.customerName || !this.tableNumber || this.currentOrder().length === 0) return;\n    const payload = {\n      userName: this.customerName,\n      tableNumber: Number(this.tableNumber),\n      itemName: this.currentOrder().map(i => i.itemName).join(', '),\n      quantity: this.currentOrder().reduce((s, i) => s + i.quantity, 0),\n      total: this.total()\n    };\n    this.http.post('/api/canteen/order', payload).subscribe(() => {\n      this.currentOrder.set([]);\n      this.customerName = '';\n      this.tableNumber = null;\n      this.loadOrders();\n    });\n  }\n};\nDashboardComponent = __decorate([Component({\n  selector: 'app-dashboard',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css']\n})], DashboardComponent);\nexport { DashboardComponent };","map":{"version":3,"names":["Component","computed","signal","CommonModule","FormsModule","DashboardComponent","http","constructor","loadMenu","loadOrders","tables","menu","ngDevMode","debugName","orders","currentOrder","newItem","name","price","customerName","tableNumber","total","reduce","s","i","get","subscribe","items","set","addMenu","trim","Number","post","addToOrder","item","exists","find","itemName","quantity","placeOrder","length","payload","userName","map","join","__decorate","selector","standalone","imports","templateUrl","styleUrls"],"sources":["C:\\Users\\HP\\OneDrive\\Desktop\\Canteen (2)\\Canteen\\frontend\\src\\app\\pages\\dashboard\\dashboard.component.ts"],"sourcesContent":["import { Component, computed, signal } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\ntype MenuItem = { id: number; name: string; price: number };\r\ntype OrderItem = {\r\n  id?: number;\r\n  itemName: string;\r\n  quantity: number;\r\n  total: number;\r\n  userName?: string;\r\n  tableNumber?: number;\r\n  orderTime?: string;\r\n};\r\n\r\n@Component({\r\n  selector: 'app-dashboard',\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule],\r\n  templateUrl: './dashboard.component.html',\r\n  styleUrls: ['./dashboard.component.css']\r\n})\r\nexport class DashboardComponent {\r\n  constructor(private http: HttpClient) {\r\n    this.loadMenu();\r\n    this.loadOrders();\r\n  }\r\n\r\n  tables = [1, 2, 3, 4, 5];\r\n  menu = signal<MenuItem[]>([]);\r\n  orders = signal<OrderItem[]>([]);\r\n  currentOrder = signal<OrderItem[]>([]);\r\n\r\n  newItem: { name: string; price: number | null } = { name: '', price: null };\r\n  customerName = '';\r\n  tableNumber: number | null = null;\r\n\r\n  total = computed(() =>\r\n    this.currentOrder().reduce((s, i) => s + i.total, 0)\r\n  );\r\n\r\n  loadMenu() {\r\n    this.http\r\n      .get<MenuItem[]>('/api/canteen/menu')\r\n      .subscribe(items => this.menu.set(items));\r\n  }\r\n\r\n  loadOrders() {\r\n    this.http\r\n      .get<OrderItem[]>('/api/canteen/orders')\r\n      .subscribe(items => this.orders.set(items));\r\n  }\r\n\r\n  addMenu() {\r\n    const name = this.newItem.name?.trim();\r\n    const price = Number(this.newItem.price);\r\n    if (!name || !price || price <= 0) return;\r\n\r\n    this.http\r\n      .post<MenuItem>('/api/canteen/menu', { name, price })\r\n      .subscribe(() => {\r\n        this.newItem = { name: '', price: null };\r\n        this.loadMenu();\r\n      });\r\n  }\r\n\r\n  addToOrder(item: MenuItem) {\r\n    const exists = this.currentOrder().find(i => i.itemName === item.name);\r\n    if (exists) {\r\n      exists.quantity += 1;\r\n      exists.total = exists.quantity * item.price;\r\n      this.currentOrder.set([...this.currentOrder()]);\r\n    } else {\r\n      this.currentOrder.set([\r\n        ...this.currentOrder(),\r\n        { itemName: item.name, quantity: 1, total: item.price }\r\n      ]);\r\n    }\r\n  }\r\n\r\n  placeOrder() {\r\n    if (!this.customerName || !this.tableNumber || this.currentOrder().length === 0) return;\r\n\r\n    const payload: OrderItem = {\r\n      userName: this.customerName,\r\n      tableNumber: Number(this.tableNumber),\r\n      itemName: this.currentOrder().map(i => i.itemName).join(', '),\r\n      quantity: this.currentOrder().reduce((s, i) => s + i.quantity, 0),\r\n      total: this.total()\r\n    };\r\n\r\n    this.http.post<OrderItem>('/api/canteen/order', payload).subscribe(() => {\r\n      this.currentOrder.set([]);\r\n      this.customerName = '';\r\n      this.tableNumber = null;\r\n      this.loadOrders();\r\n    });\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}